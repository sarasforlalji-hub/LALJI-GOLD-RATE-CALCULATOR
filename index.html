<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lalji Jewellers Gold Rate Calculator</title>

  <!-- Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"></noscript>

  <style>
    body { font-family: 'Inter', sans-serif; background-color: #FBF8F1; }
    .container-wrapper { overflow: hidden; width: 100%; display: flex; justify-content: center; }
    .content-wrapper { display: flex; transition: transform 0.4s ease; width: 100%; will-change: transform; }
    .calculator-page { width: 100%; flex-shrink: 0; padding: 1rem; }
    .swipe-indicator { animation: bounce-right 2s infinite; }
    .swipe-indicator.rotate-180 { animation: bounce-left 2s infinite; }
    @keyframes bounce-right { 0%,100%{transform:translateX(0);}50%{transform:translateX(8px);} }
    @keyframes bounce-left { 0%,100%{transform:translateX(0);}50%{transform:translateX(-8px);} }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 sm:p-6">

  <div class="container-wrapper max-w-2xl w-full">
    <div id="contentWrapper" class="content-wrapper">
      
      <!-- First Calculator Page -->
      <div class="calculator-page">
        <div class="bg-white rounded-3xl shadow-2xl p-6 sm:p-10 border border-gray-100">
          <div class="flex flex-col items-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-[#A98E66] text-center mb-2">
              Gold Rate Calculator
            </h1>
            <button class="text-gray-500 text-sm mt-2 flex items-center swipe-indicator" onclick="swipeLeft()">
              Swipe Left for Jewellery Calculator <i class="fas fa-arrow-right ml-2"></i>
            </button>
          </div>
          <p class="text-center text-gray-600 mb-8 text-lg">Enter the 9999 Gold Rate to calculate prices for all other purities.</p>
          <div class="mb-6">
            <label for="rate9999" class="block text-sm font-semibold text-gray-700 mb-2">9999 Gold Rate</label>
            <input type="number" id="rate9999" placeholder="Enter Rate For 10-Grams..." class="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#A98E66] focus:border-transparent shadow-sm">
          </div>
          <div class="space-y-4">
            <div class="bg-gray-50 rounded-2xl p-4 flex justify-between items-center"><span>18KT Sale Rate</span><span id="rate18ktSale" class="text-2xl font-bold text-[#A98E66]">0.00</span></div>
            <div class="bg-gray-50 rounded-2xl p-4 flex justify-between items-center"><span>22KT Sale Rate</span><span id="rate22ktSale" class="text-2xl font-bold text-[#A98E66]">0.00</span></div>
            <div class="bg-gray-50 rounded-2xl p-4 flex justify-between items-center"><span>18KT Purchase Rate</span><span id="rate18ktPurchase" class="text-2xl font-bold text-[#A98E66]">0.00</span></div>
            <div class="bg-gray-50 rounded-2xl p-4 flex justify-between items-center"><span>22KT Purchase Rate</span><span id="rate22ktPurchase" class="text-2xl font-bold text-[#A98E66]">0.00</span></div>
          </div>
          <p class="text-xs text-gray-400 text-center mt-8">© Copyright Of Lalji Gems & Jewellers Pvt. Ltd.</p>
        </div>
      </div>

      <!-- Second Calculator Page -->
      <div class="calculator-page relative" id="jewelleryCalculator">
        <div class="bg-white rounded-3xl shadow-2xl p-6 sm:p-10 border border-gray-100 relative">
          
          <!-- Settings button -->
          <div class="flex justify-end w-full mb-2">
            <button id="settingsBtn" class="text-gray-600 hover:text-[#A98E66] transition"><i class="fas fa-cog text-xl"></i></button>
          </div>

          <div class="flex flex-col items-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-[#A98E66] text-center mb-2">Jewellery Price Calculator</h1>
            <button class="text-gray-500 text-sm mt-2 flex items-center swipe-indicator rotate-180" onclick="swipeRight()">
              <i class="fas fa-arrow-left mr-2"></i>Swipe Right to go Back
            </button>
          </div>

          <p class="text-center text-gray-600 mb-8 text-lg">Calculate Sale & Discounted Prices.</p>

          <!-- Settings Modal (absolute inside Jewellery Calculator) -->
          <div id="settingsModal" class="hidden absolute inset-0 bg-black/50 flex items-center justify-center z-50">
            <div class="bg-white rounded-2xl shadow-2xl p-6 w-11/12 max-w-sm relative">
              <!-- Visible dark X button -->
              <button id="closeSettingsBtn" class="absolute top-3 right-3 text-gray-700 hover:text-gray-900">
                <i class="fas fa-times text-2xl"></i>
              </button>

              <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Change MC</h2>
              <input type="number" id="discountPercentage" class="w-full text-center px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#A98E66] mb-4" value="17">
              <p class="text-sm text-gray-500 text-center">Example: 17 = 17% discount</p>
              <div class="flex justify-center mt-6">
                
              </div>
            </div>
          </div>

          <!-- Inputs -->
          <div class="mb-6">
            <label for="jewelleryWeight" class="block text-sm font-semibold text-gray-700 mb-2">Jewellery Weight (Grams)</label>
            <input type="number" id="jewelleryWeight" placeholder="Enter Weight..." class="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#A98E66] shadow-sm">
          </div>

          <div class="mb-8">
            <span class="block text-sm font-semibold text-gray-700 mb-2">Purity</span>
            <div class="flex justify-around space-x-2">
              <label class="flex-1 flex items-center justify-center p-3 border border-gray-300 rounded-full cursor-pointer hover:bg-gray-100">
                <input type="radio" name="jewelleryPurity" value="18kt" checked class="hidden"><span>18KT</span>
              </label>
              <label class="flex-1 flex items-center justify-center p-3 border border-gray-300 rounded-full cursor-pointer hover:bg-gray-100">
                <input type="radio" name="jewelleryPurity" value="22kt" class="hidden"><span>22KT</span>
              </label>
            </div>
          </div>

          <!-- Results -->
          <div class="space-y-4">
            <div class="bg-gray-50 rounded-2xl p-4 flex justify-between items-center"><span>Sale Price</span><span id="salePrice" class="text-2xl font-bold text-[#A98E66]">0.00</span></div>
            <div class="bg-gray-50 rounded-2xl p-4 flex justify-between items-center"><span>Discounted Price</span><span id="discountedPrice" class="text-2xl font-bold text-[#A98E66]">0.00</span></div>
          </div>

          <p class="text-sm text-gray-500 text-center mt-6">Note: All prices include 3% GST.</p>
          <p class="text-xs text-gray-400 text-center mt-6">© Copyright Of Lalji Gems & Jewellers Pvt. Ltd.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    let rate18ktSale=0, rate22ktSale=0, jewelleryDiscountPercentage=0.17;
    function debounce(func,delay){let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>func.apply(this,a),delay)};}

    // Swipe handling
    let touchStartX=0, touchEndX=0, swipeActive=false;
    const swipeThreshold=50;
    const contentWrapper=document.getElementById('contentWrapper');

    document.addEventListener('touchstart',e=>{
      if(e.target.closest('button')||e.target.closest('input')){swipeActive=false;return;}
      swipeActive=true;
      touchStartX=e.touches[0].clientX;
    });
    document.addEventListener('touchmove',e=>{
      if(!swipeActive) return;
      touchEndX=e.touches[0].clientX;
    });
    document.addEventListener('touchend',()=>{
      if(!swipeActive) return;
      const diff=touchEndX-touchStartX;
      if(Math.abs(diff)>swipeThreshold){diff<0?swipeLeft():swipeRight();}
      swipeActive=false;
    });

    function swipeLeft(){contentWrapper.style.transform='translateX(-100%)';}
    function swipeRight(){contentWrapper.style.transform='translateX(0)';}

    // Rates calculation
    function calculateRates(){
      const r=parseFloat(document.getElementById('rate9999').value);
      if(isNaN(r)||r<=0){['rate18ktSale','rate22ktSale','rate18ktPurchase','rate22ktPurchase'].forEach(id=>document.getElementById(id).textContent='0.00');rate18ktSale=0;rate22ktSale=0;return;}
      rate18ktSale=((r/10)*0.9708738)*0.75; rate22ktSale=((r/10)*0.9708738)*0.916;
      document.getElementById('rate18ktSale').textContent=rate18ktSale.toFixed(2);
      document.getElementById('rate22ktSale').textContent=rate22ktSale.toFixed(2);
      document.getElementById('rate18ktPurchase').textContent=(rate18ktSale-200).toFixed(2);
      document.getElementById('rate22ktPurchase').textContent=(rate22ktSale-200).toFixed(2);
      calculateJewelleryPrice();
    }

    function calculateJewelleryPrice(){
      const w=parseFloat(document.getElementById('jewelleryWeight').value);
      const p=document.querySelector('input[name="jewelleryPurity"]:checked').value;
      if(isNaN(w)||w<=0){salePrice.textContent=discountedPrice.textContent='0.00';return;}
      let base=p==='18kt'?rate18ktSale:rate22ktSale;
      if(base===0){salePrice.textContent=discountedPrice.textContent='N/A';return;}
      salePrice.textContent=(((base*w)*1.20)*1.03).toFixed(2);
      discountedPrice.textContent=(((base*w)*(1+jewelleryDiscountPercentage))*1.03).toFixed(2);
    }

    // Modal logic
    const settingsBtn=document.getElementById('settingsBtn');
    const settingsModal=document.getElementById('settingsModal');
    const closeSettingsBtn=document.getElementById('closeSettingsBtn');
    const modalCloseBtn=document.getElementById('modalCloseBtn');
    const discountPercentageInput=document.getElementById('discountPercentage');

    settingsBtn.addEventListener('click',()=>settingsModal.classList.remove('hidden'));
    closeSettingsBtn.addEventListener('click',()=>settingsModal.classList.add('hidden'));
    modalCloseBtn.addEventListener('click',()=>settingsModal.classList.add('hidden'));
    settingsModal.addEventListener('click',e=>{if(e.target===settingsModal)settingsModal.classList.add('hidden');});
    discountPercentageInput.addEventListener('input',()=>{
      const n=parseFloat(discountPercentageInput.value);
      if(!isNaN(n)&&n>=0){jewelleryDiscountPercentage=n/100;calculateJewelleryPrice();}
    });

    // Listeners
    document.getElementById('rate9999').addEventListener('input',debounce(calculateRates,300));
    document.getElementById('jewelleryWeight').addEventListener('input',debounce(calculateJewelleryPrice,300));
    document.querySelectorAll('input[name="jewelleryPurity"]').forEach(r=>r.addEventListener('change',calculateJewelleryPrice));
  </script>
</body>
</html>


